
Сообщение будет  представлять собой строку, разделённую на участки по n символов в зависимости от типа
Условно структура сообщения:
шапка (90%) + тело сообщения (10%)
Да какая шапка, надо просто читать сообщение по кускам. Слишком много вариантов, чтобы их унифицировать. 

Точнее:
[clientN][head][...][body]
N - уникальный номер игрока, должен выдаваться при регистрации, прописан в профайле игрока
нет, не так.
[player][head][...][body]
player - уникальный никнейм (технический, только для сервера) 
head = service/chat/game/trade/offer/alive/statistics/

statistics[player][]     - (к/c) запрос статистики по игроку
alive[1]                 - (к/c) и клиент и сервер посылают друг другу первым делом это, дабы убедиться, что они подключились друг к другу.
offer[possible][?]       - (к/c) режим предложений. клиент посылает на сервер запрос, сервер присылает возможные варианты, в клиенте высвечивается окошко
offer[player][?]         - (c)   сервер присылает предложение от другого игрока
offer[answer][1/0]       - (к)   согласен/не согласен с предложением (тут должен быть таймер в клиенте, который отвечает нет по истечении какого-то срока). и вообще игра не должна останавливаться
offer[decision][1/0]     - (с)   ваше предложение принято
trade[?]                 - (к/c) торговля. сервер присылает возможные варианты, в клиенте высвечивается окошко. (или невозможные варианты)
trade[player][bet]       - (c)   заказ
trade[bet]               - (к)   заказ
-тут что-то ещё про снос и окончательный заказ
game[turn][card]         - (к)   клиент посылает свой ход
game[turn][player][card] - (c)   сервер посылает ходы
game[turn][player][turn] - (c)   сервер посылает раздумья
game[turn][lastbribe]    - (к/c) последняя взятка (показать всем)
chat[message]            - (к/c) всё понятно, общий чат
service[???]             - (к/c) всё остальное, что забыто выше


Нужно сделать так, чтобы [head] определял число блоков, идущих после него. Например, game[turn][card] и  game[turn][player][card] - разное число блоков, не надо так :(

